"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4598],{4598:(H,g,l)=>{l.r(g),l.d(g,{HomePageModule:()=>k});var u=l(177),i=l(5150),f=l(4341),d=l(8986),t=l(3953),R=l(9649),m=l(1626);let I=(()=>{var e;class s{constructor(n){this.http=n,this.apiUrl="https://smarty.kerzz.com:4004/api/mock/getFeed",this.apiKey="bW9jay04ODc3NTU2NjExMjEyNGZmZmZmZmJ2"}getRestaurants(n,a,r,c){const p=(new m.Lr).set("apiKey",this.apiKey);return this.http.post(this.apiUrl,{latitude:n,longitude:a,limit:r,skip:c},{headers:p})}}return(e=s).\u0275fac=function(n){return new(n||e)(t.KVO(m.Qq))},e.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),s})();const b=(e,s)=>({open:e,closed:s});function M(e,s){if(1&e&&(t.qex(0),t.nrm(1,"img",20),t.j41(2,"ion-badge",21),t.nrm(3,"img",22),t.EFF(4),t.k0s(),t.bVm()),2&e){const o=t.XpG().$implicit;t.R7$(),t.Y8G("src",o.images[0].base64,t.B4B),t.R7$(3),t.SpI(" ",o.storeInfo.rate," ")}}function P(e,s){if(1&e&&(t.j41(0,"ion-card")(1,"div",12),t.DNE(2,M,5,2,"ng-container",13),t.k0s(),t.j41(3,"ion-card-content")(4,"ion-card-title",14)(5,"b"),t.EFF(6),t.k0s()(),t.j41(7,"p"),t.EFF(8),t.k0s(),t.j41(9,"div",15)(10,"div",16),t.nrm(11,"span"),t.k0s(),t.j41(12,"div",16),t.nrm(13,"ion-icon",17),t.j41(14,"span"),t.EFF(15),t.k0s()(),t.j41(16,"div",16),t.nrm(17,"ion-icon",18),t.j41(18,"span")(19,"b"),t.EFF(20),t.k0s()()(),t.j41(21,"div",16)(22,"span",19),t.EFF(23),t.k0s(),t.EFF(24),t.k0s()()()()),2&e){const o=s.$implicit;t.R7$(2),t.Y8G("ngIf",null==o.images[0]?null:o.images[0].base64),t.R7$(4),t.JRh(o.title),t.R7$(2),t.JRh(o.text),t.R7$(7),t.SpI("Min. Sipari\u015f Tutar\u0131: \u20ba",o.storeInfo.minOrderPrice,""),t.R7$(5),t.SpI("",o.distance," km yak\u0131n\u0131nda"),t.R7$(2),t.Y8G("ngClass",t.l_i(9,b,"open"===o.storeInfo.status,"closed"===o.storeInfo.status)),t.R7$(),t.SpI(" ","open"===o.storeInfo.status?"\u0130\u015fletme A\xe7\u0131k":"\u0130\u015fletme Kapal\u0131"," "),t.R7$(),t.Lme(" ",o.storeInfo.workingHours[0].open," / ",o.storeInfo.workingHours[0].close," ")}}const F=[{path:"",component:(()=>{var e;class s{constructor(n,a){this.geolocation=n,this.restaurantService=a,this.restaurants=[],this.allRestaurants=[],this.limit=10,this.skip=0,this.latitude=0,this.longitude=0}ngOnInit(){this.geolocation.getCurrentPosition().then(n=>{this.latitude=n.coords.latitude,this.longitude=n.coords.longitude,this.loadRestaurants()}).catch(n=>{console.log("Error getting location",n)})}loadRestaurants(n){void 0!==this.latitude&&void 0!==this.longitude&&this.restaurantService.getRestaurants(this.latitude,this.longitude,this.limit,this.skip).subscribe(a=>{this.restaurants=this.restaurants.concat(a.response),this.restaurants.forEach(r=>{r.distance=this.calculateDistanceInKilometers(this.latitude,this.longitude,r.storeInfo.geoLocation.latitude,r.storeInfo.geoLocation.longitude)}),this.allRestaurants=this.restaurants,n&&n.target.complete(),this.skip+=this.limit})}loadMore(n){this.loadRestaurants(n)}filterRestaurants(n){const a=n.target.value.toLowerCase();this.restaurants=a?this.allRestaurants.filter(r=>r.title.toLowerCase().includes(a)||r.text.toLowerCase().includes(a)):this.allRestaurants}calculateDistanceInKilometers(n,a,r,c){let x=Math.sqrt(Math.pow(r-n,2)+Math.pow(c-a,2))*(Math.PI/180)*6371;return Number(x.toFixed(2))}}return(e=s).\u0275fac=function(n){return new(n||e)(t.rXU(R.L),t.rXU(I))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-home"]],decls:20,vars:2,consts:[[3,"translucent"],[2,"background-color","white"],["slot","start"],["src","assets/icon/menu.png"],["slot","end"],["src","assets/icon/shopping.png"],["src","assets/icon/pastOrders.png"],["show-clear-button","always","clear-icon","options-outline","placeholder","Mekan ara",2,"margin-top","20px","margin-bottom","20px","background-color","white",3,"ionInput"],[1,"results-title"],[4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],[1,"image-container"],[4,"ngIf"],[2,"font-size","18px"],[1,"info-container"],[1,"info-item"],["name","basket"],["name","location-outline"],[3,"ngClass"],[1,"restaurant-image",3,"src"],["color","danger",1,"rating-badge"],["src","assets/icon/star.png"]],template:function(n,a){1&n&&(t.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2)(3,"ion-button"),t.nrm(4,"img",3),t.k0s()(),t.j41(5,"ion-buttons",4)(6,"ion-button"),t.nrm(7,"img",5),t.k0s(),t.j41(8,"ion-button"),t.nrm(9,"img",6),t.k0s()(),t.j41(10,"ion-title"),t.EFF(11,"Ana Sayfa"),t.k0s()()(),t.j41(12,"ion-content")(13,"ion-searchbar",7),t.bIt("ionInput",function(c){return a.filterRestaurants(c)}),t.k0s(),t.j41(14,"p",8)(15,"b"),t.EFF(16,"Sonu\xe7lar"),t.k0s()(),t.DNE(17,P,25,12,"ion-card",9),t.j41(18,"ion-infinite-scroll",10),t.bIt("ionInfinite",function(c){return a.loadMore(c)}),t.nrm(19,"ion-infinite-scroll-content",11),t.k0s()()),2&n&&(t.Y8G("translucent",!0),t.R7$(17),t.Y8G("ngForOf",a.restaurants))},dependencies:[u.YU,u.Sq,u.bT,i.In,i.Jm,i.QW,i.b_,i.I9,i.tN,i.W9,i.eU,i.iq,i.Ax,i.Hp,i.S1,i.BC,i.ai,i.Gw],styles:["[_nghost-%COMP%]{font-family:Montserrat,sans-serif}.results-title[_ngcontent-%COMP%]{margin:0;padding-left:16px;font-size:14px}.image-container[_ngcontent-%COMP%]{position:relative;width:100%}.restaurant-image[_ngcontent-%COMP%]{width:100%;height:150px;object-fit:cover}.rating-badge[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;z-index:10;font-size:12px}.info-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}.info-item[_ngcontent-%COMP%]{flex:1 1 calc(50% - 8px);display:flex;align-items:center;font-size:12px;gap:4px}.open[_ngcontent-%COMP%]{color:green}.closed[_ngcontent-%COMP%]{color:red}"]}),s})()}];let v=(()=>{var e;class s{}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[d.iI.forChild(F),d.iI]}),s})(),k=(()=>{var e;class s{}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[u.MD,f.YN,i.bv,v]}),s})()}}]);